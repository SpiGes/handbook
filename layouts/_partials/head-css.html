{{ with resources.Get "scss/main.scss" }}
  {{ $opts := dict
    "transpiler" "dartsass"
    "enableSourceMap" hugo.IsDevelopment
    "outputStyle" (cond hugo.IsDevelopment "expanded" "compressed")
    "targetPath" "css/main.css"
    "vars" site.Params.styles
    "silenceDependencyDeprecations" true
    "silenceDeprecations" (slice "import" "global-builtin" )
  }}
  {{ with . | toCSS $opts }}
    {{ if hugo.IsDevelopment }}
      <link rel="stylesheet" href="{{ .RelPermalink }}" />
    {{ else }}
      {{ with . | fingerprint }}
        <link
          rel="stylesheet"
          href="{{ .RelPermalink }}"
          integrity="{{ .Data.Integrity }}"
          crossorigin="anonymous"
        />
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}
